{% extends 'project/base.html' %}

{% block title %}Course Detail{% endblock %}

{% block content %}
<h2>{{ course.course_name }}</h2>
<p>{{ course.description }}</p>
<p><strong>Instructor:</strong> {{ course.instructor.username }}</p>

<h3>Assignments</h3>
<ul>
    {% for assignment in assignments %}
        <li>{{ assignment.title }} - Due: {{ assignment.due_date }}</li>
    {% empty %}
        <li>No assignments available.</li>
    {% endfor %}
</ul>
<a href="{% url 'assignment_create' course.id %}">Add Assignment</a>

<h3>Enrollments</h3>
<ul>
    {% for enrollment in enrollments %}
        <li>{{ enrollment.student.username }} - Enrolled on {{ enrollment.enrollment_date }}</li>
    {% empty %}
        <li>No students enrolled in this course.</li>
    {% endfor %}
</ul>
<a href="{% url 'enrollment_create' course.id %}">Enroll New Student</a>

<h3>Discussions</h3>
<ul>
    {% for thread in discussions %}
        <li>{{ thread.title }} - Created by {{ thread.created_by.username }}</li>
    {% empty %}
        <li>No discussion threads available.</li>
    {% endfor %}
</ul>
<a href="{% url 'discussion_list' course.id %}">View All Discussions</a>
<a href="{% url 'discussion_create' course.id %}">Add Discussion</a>

<h3>Attendance</h3>
<ul>
    {% for record in attendance_records %}
        <li>{{ record.date }} - {{ record.student.username }} - {% if record.status %}Present{% else %}Absent{% endif %}</li>
    {% empty %}
        <li>No attendance records available.</li>
    {% endfor %}
</ul>
<p><a href="{% url 'attendance_list' course.id %}">View All Attendance Records</a></p>

<h3>Resources</h3>
<ul>
    {% for resource in resources %}
        <li>
            {{ resource.title }}
            {% if resource.file %}
                - <a href="{{ resource.file.url }}">Download</a>
            {% endif %}
            {% if resource.url %}
                - <a href="{{ resource.url }}">Visit</a>
            {% endif %}
        </li>
    {% empty %}
        <li>No resources available.</li>
    {% endfor %}
</ul>
<p><a href="{% url 'resource_list' course.id %}">View All Resources</a></p>

<h3>Certificates</h3>
<p><a href="{% url 'certificate_list' %}">View Certificates</a></p>

<a href="{% url 'course_list' %}">Back to Courses</a>
{% endblock %}
